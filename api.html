
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>API &#8212; Concrete Settings  documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Batteries" href="batteries.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="batteries.html" title="Batteries"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Concrete Settings  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api">
<span id="id1"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p><strong>======== IN PROGRESS ========</strong></p>
<p>API documentation is not complete yet.</p>
<p><strong>======== IN PROGRESS ========</strong></p>
<p>This part of the documentation briefly covers the interfaces of Concrete Settings.</p>
<div class="section" id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="concrete_settings.Setting">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.</code><code class="sig-name descname">Setting</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">value</em>, <em class="sig-param">*</em>, <em class="sig-param">doc</em>, <em class="sig-param">validators</em>, <em class="sig-param">type_hint</em>, <em class="sig-param">behaviors</em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Setting" title="Permalink to this definition">¶</a></dt>
<dd><p>A setting is a <strong>named</strong> object for storing, documenting and validating
a certain value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>) – the initial value of a setting with the default
<a class="reference internal" href="#concrete_settings.types.Undefined" title="concrete_settings.types.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>.</p></li>
<li><p><strong>doc</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – an end-user -friendly setting documentation.</p></li>
<li><p><strong>validators</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a>) – setting validators, a tuple of
<a class="reference internal" href="#concrete_settings.validators.Validator" title="concrete_settings.validators.Validator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Validator</span></code></a> callables.</p></li>
<li><p><strong>type_hint</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>) – setting type, something one would use as type annotation.
The default value
(<a class="reference internal" href="#concrete_settings.types.GuessSettingType" title="concrete_settings.types.GuessSettingType"><code class="xref py py-class docutils literal notranslate"><span class="pre">GuessSettingType</span></code></a>)
would invoke type guessing mechanism.</p></li>
<li><p><strong>behaviors</strong> – setting behaviors, a container of <a class="reference internal" href="#concrete_settings.Behavior" title="concrete_settings.Behavior"><code class="xref py py-class docutils literal notranslate"><span class="pre">Behavior</span></code></a> objects.</p></li>
</ul>
</dd>
</dl>
<p>The corresponding implicit definition of a setting in Settings class is written as following:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
    <span class="n">default_validators</span> <span class="o">=</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">mandatory_validators</span> <span class="o">=</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1">#: Documentation is written</span>
    <span class="c1">#: in Sphinx-style comments above</span>
    <span class="c1">#: the setting definition</span>
    <span class="n">SETTING_NAME</span><span class="p">:</span> <span class="n">type_hint</span> <span class="o">=</span> <span class="n">value</span> <span class="nd">@behavior1</span> <span class="nd">@behavior2</span> <span class="o">@...</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="concrete_settings.Settings">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.</code><code class="sig-name descname">Settings</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings is a container for one or more <a class="reference internal" href="#concrete_settings.Setting" title="concrete_settings.Setting"><code class="xref py py-class docutils literal notranslate"><span class="pre">Setting</span></code></a> objects.
Settings classes can be mixed and nested.</p>
<dl class="attribute">
<dt id="concrete_settings.Settings.default_validators">
<code class="sig-name descname">default_validators</code><a class="headerlink" href="#concrete_settings.Settings.default_validators" title="Permalink to this definition">¶</a></dt>
<dd><p>Validators applied to each Setting that have no defined validators.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>[<a class="reference internal" href="#concrete_settings.validators.Validator" title="concrete_settings.validators.Validator">Validator</a>]</p>
</dd>
<dt class="field-even">Value</dt>
<dd class="field-even"><p><a class="reference internal" href="#concrete_settings.validators.ValueTypeValidator" title="concrete_settings.validators.ValueTypeValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">(ValueTypeValidator(),</span> <span class="pre">)</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="concrete_settings.Settings.mandatory_validators">
<code class="sig-name descname">mandatory_validators</code><a class="headerlink" href="#concrete_settings.Settings.mandatory_validators" title="Permalink to this definition">¶</a></dt>
<dd><p>Validators applied to every Setting in the class.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>[<a class="reference internal" href="#concrete_settings.validators.Validator" title="concrete_settings.validators.Validator">Validator</a>]</p>
</dd>
<dt class="field-even">Value</dt>
<dd class="field-even"><p>()</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Settings.is_valid">
<code class="sig-name descname">is_valid</code><span class="sig-paren">(</span><em class="sig-param">raise_exception=False</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/concrete_settings/core.html#Settings.is_valid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Settings.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate settings and return <code class="docutils literal notranslate"><span class="pre">True</span></code> if settings are valid.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">raise_exception</span></code> is False, validation errors are stored
in <a class="reference internal" href="#concrete_settings.Settings.errors" title="concrete_settings.Settings.errors"><code class="xref py py-meth docutils literal notranslate"><span class="pre">self.errors</span></code></a>.
Otherwise a <a class="reference internal" href="#concrete_settings.exceptions.ValidationError" title="concrete_settings.exceptions.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a>
is raised when the first invalid setting is encountered.</p>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Settings.validate">
<code class="sig-name descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Settings.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Settings.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate settings altogether.</p>
<p>This is a stub method intended to be overriden when needed.
It is called after individual settings have been validated
without any errors.</p>
<p>Raise <a class="reference internal" href="#concrete_settings.exceptions.ValidationError" title="concrete_settings.exceptions.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a>
to indicate errors.</p>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Settings.errors">
<em class="property">property </em><code class="sig-name descname">errors</code><a class="headerlink" href="#concrete_settings.Settings.errors" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">errors</span></code> property contains validation errors from the last
<a class="reference internal" href="#concrete_settings.Settings.is_valid" title="concrete_settings.Settings.is_valid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">settings.is_valid(raise_exception=False)</span></code></a>
call. The errors are packed in recursive
<a class="reference internal" href="#concrete_settings.exceptions.ValidationErrorDetail" title="concrete_settings.exceptions.ValidationErrorDetail"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationErrorDetail</span></code></a>
structure.</p>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Settings.is_being_validated">
<em class="property">property </em><code class="sig-name descname">is_being_validated</code><a class="headerlink" href="#concrete_settings.Settings.is_being_validated" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates that settings are being validated.</p>
<p>The property is intended to be used by behaviors to
distinguish between Setting reads during validation
and normal usage.</p>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Settings.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param">source</em><span class="optional">[</span>, <em class="sig-param">strategies</em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Settings.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Settings.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update settings from the given source.</p>
<p>The update process consist of two stages:</p>
<ol class="arabic simple">
<li><p>Intializing an access and/or reading a source object -
Python, YAML or JSON file, environmental variables, a dict,
<code class="docutils literal notranslate"><span class="pre">locals()</span></code> etc.</p></li>
<li><p>Update the settings by the values read from the sources.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> – can either be a dict, an instance of
<a class="reference internal" href="#concrete_settings.sources.Source" title="concrete_settings.sources.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a>
or a path to the source file.</p></li>
<li><p><strong>strategies</strong> – a dictionary of
{ setting_name:
<a class="reference internal" href="#concrete_settings.sources.strategies.Strategy" title="concrete_settings.sources.strategies.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a> callable}
which affect how settings’ values are updated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Settings.extract_to">
<code class="sig-name descname">extract_to</code><span class="sig-paren">(</span><em class="sig-param">destination</em><span class="optional">[</span>, <em class="sig-param">prefix</em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Settings.extract_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Settings.extract_to" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="concrete_settings.setting">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.</code><code class="sig-name descname">setting</code><a class="headerlink" href="#concrete_settings.setting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="concrete_settings.core.PropertySetting">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.core.</code><code class="sig-name descname">PropertySetting</code><a class="headerlink" href="#concrete_settings.core.PropertySetting" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">&#64;setting</span></code> (an alias to <code class="docutils literal notranslate"><span class="pre">PropertySetting</span></code> decorator-class) is used to mark
class methods as settings. The property-settings are read-only and used to
compute a value, usually based on other settings. For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
    <span class="n">ADMIN_NAME</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Alex&#39;</span>
    <span class="n">ADMIN_EMAIL</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;alex@example.com&#39;</span>

    <span class="nd">@setting</span>
    <span class="k">def</span> <span class="nf">ADMIN_FULL_EMAIL</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Full admin email in `name &lt;email&gt;` format&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ADMIN_NAME</span><span class="si">}</span><span class="s1"> &lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ADMIN_EMAIL</span><span class="si">}</span><span class="s1">&gt;&#39;</span>
</pre></div>
</div>
<p>Note that methods written in UPPER_CASE are converted to
<code class="docutils literal notranslate"><span class="pre">PropertySetting</span></code> automatically and do not require
decoration by <code class="docutils literal notranslate"><span class="pre">&#64;setting</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="concrete_settings.prefix">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.</code><code class="sig-name descname">prefix</code><a class="headerlink" href="#concrete_settings.prefix" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>A decorator for Settings classes which appends
the defined prefix to each Setting attribute.
For example:</p>
</div></blockquote>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@prefix</span><span class="p">(</span><span class="s1">&#39;MY&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
   <span class="n">SPEED</span> <span class="o">=</span> <span class="mi">10</span>
   <span class="n">NAME</span> <span class="o">=</span> <span class="s1">&#39;alex&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">AppSettings</span><span class="p">()</span><span class="o">.</span><span class="n">MY_NAME</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>alex
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-concrete_settings.types">
<span id="types"></span><h2>Types<a class="headerlink" href="#module-concrete_settings.types" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="concrete_settings.types.Undefined">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.types.</code><code class="sig-name descname">Undefined</code><a class="reference internal" href="_modules/concrete_settings/types.html#Undefined"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.types.Undefined" title="Permalink to this definition">¶</a></dt>
<dd><p>A special Setting value which indicates
that a value should be set by other means, e.g. by updating
the settings object.
Often used in conjuction with
<a class="reference internal" href="#concrete_settings.validators.RequiredValidator" title="concrete_settings.validators.RequiredValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequiredValidator</span></code></a>
and
<a class="reference internal" href="#concrete_settings.contrib.behaviors.required" title="concrete_settings.contrib.behaviors.required"><code class="xref py py-class docutils literal notranslate"><span class="pre">required</span></code></a> behavior.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
   <span class="n">SPEED</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Undefined</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="concrete_settings.types.GuessSettingType">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.types.</code><code class="sig-name descname">GuessSettingType</code><a class="reference internal" href="_modules/concrete_settings/types.html#GuessSettingType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.types.GuessSettingType" title="Permalink to this definition">¶</a></dt>
<dd><p>A special value for <code class="docutils literal notranslate"><span class="pre">Setting.type_hint</span></code>, which indicates
that a Setting type should be guessed from the default value.</p>
<p>For an <code class="docutils literal notranslate"><span class="pre">Undefined</span></code> or an unknown type, the guessed type
hint is <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Any</span></code></a>.</p>
<dl class="attribute">
<dt id="concrete_settings.types.GuessSettingType.KNOWN_TYPES">
<code class="sig-name descname">KNOWN_TYPES</code><em class="property"> = [&lt;class 'bool'&gt;, &lt;class 'int'&gt;, &lt;class 'float'&gt;, &lt;class 'complex'&gt;, &lt;class 'list'&gt;, &lt;class 'tuple'&gt;, &lt;class 'range'&gt;, &lt;class 'bytes'&gt;, &lt;class 'str'&gt;, &lt;class 'frozenset'&gt;, &lt;class 'set'&gt;, &lt;class 'dict'&gt;]</em><a class="headerlink" href="#concrete_settings.types.GuessSettingType.KNOWN_TYPES" title="Permalink to this definition">¶</a></dt>
<dd><p>Recognized Setting value types</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-concrete_settings.validators">
<span id="validators"></span><h2>Validators<a class="headerlink" href="#module-concrete_settings.validators" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="concrete_settings.validators.Validator">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.validators.</code><code class="sig-name descname">Validator</code><span class="sig-paren">(</span><em class="sig-param">Protocol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/validators/validator.html#Validator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.validators.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>A validator is a callable that raises an exception if a value is wrong.</p>
<p>A validator accepts a value as a mandatory argument, and keyword-only arguments
referring to settings, setting and setting’s name.</p>
<dl class="method">
<dt id="concrete_settings.validators.Validator.__call__">
<em class="property">abstract </em><code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">*</em>, <em class="sig-param">name: str = None</em>, <em class="sig-param">owner: Settings = None</em>, <em class="sig-param">setting: Setting = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/validators/validator.html#Validator.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.validators.Validator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate a value. Raise <cite>ValidationError</cite> if value is wrong.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="concrete_settings.exceptions.ValidationError">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.exceptions.</code><code class="sig-name descname">ValidationError</code><span class="sig-paren">(</span><em class="sig-param">detail: Union[str, List[ValidationErrorDetail], Dict[str, ValidationErrorDetail]] = ''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/exceptions.html#ValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.exceptions.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by a setting validator when a setting value is invalid</p>
</dd></dl>

<dl class="data">
<dt id="concrete_settings.exceptions.ValidationErrorDetail">
<code class="sig-prename descclassname">concrete_settings.exceptions.</code><code class="sig-name descname">ValidationErrorDetail</code><em class="property"> = typing.Union[str, typing.List[ForwardRef('ValidationErrorDetail')], typing.Dict[str, ForwardRef('ValidationErrorDetail')]]</em><a class="headerlink" href="#concrete_settings.exceptions.ValidationErrorDetail" title="Permalink to this definition">¶</a></dt>
<dd><p>A recursive union type which describes validation errors.</p>
<p><code class="docutils literal notranslate"><span class="pre">ValidationErrorDetail</span></code> is defined as</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">SettingName</span> <span class="o">=</span> <span class="nb">str</span>

<span class="n">ValidationErrorDetail</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span>
    <span class="n">List</span><span class="p">[</span><span class="n">ValidationErrorDetail</span><span class="p">],</span>
    <span class="n">Dict</span><span class="p">[</span><span class="n">SettingName</span><span class="p">,</span> <span class="n">ValidationErrorDetail</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="valuetypevalidator">
<h3>ValueTypeValidator<a class="headerlink" href="#valuetypevalidator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.validators.ValueTypeValidator">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.validators.</code><code class="sig-name descname">ValueTypeValidator</code><span class="sig-paren">(</span><em class="sig-param">type_hint=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/validators/value_type_validator.html#ValueTypeValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.validators.ValueTypeValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches setting value type and its type hint.</p>
<p>Setting value type should match <code class="docutils literal notranslate"><span class="pre">setting.type_hint</span></code>.
<a class="reference internal" href="#concrete_settings.types.Undefined" title="concrete_settings.types.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> value is considered
valid for any type hint.</p>
<p><code class="docutils literal notranslate"><span class="pre">ValueTypeValidator</span></code> is the default validator in
<a class="reference internal" href="#concrete_settings.Settings.default_validators" title="concrete_settings.Settings.default_validators"><code class="xref py py-data docutils literal notranslate"><span class="pre">Settings.default_validators</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>type_hint</strong> – If <code class="docutils literal notranslate"><span class="pre">setting.type_hint</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then
type match is performed against the given
<code class="docutils literal notranslate"><span class="pre">type_hint</span></code>.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="requiredvalidator">
<h3>RequiredValidator<a class="headerlink" href="#requiredvalidator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.validators.RequiredValidator">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.validators.</code><code class="sig-name descname">RequiredValidator</code><span class="sig-paren">(</span><em class="sig-param">message: str = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/validators/required_validator.html#RequiredValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.validators.RequiredValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates that setting value is not
<a class="reference internal" href="#concrete_settings.types.Undefined" title="concrete_settings.types.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> – Custom validation error message template.</p>
</dd>
<dt class="field-even">Value message</dt>
<dd class="field-even"><p>“Setting <cite>{name}</cite> is required to have a value.
Current value is `Undefined`”</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="deprecatedvalidator">
<h3>DeprecatedValidator<a class="headerlink" href="#deprecatedvalidator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.contrib.validators.DeprecatedValidator">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.contrib.validators.</code><code class="sig-name descname">DeprecatedValidator</code><span class="sig-paren">(</span><em class="sig-param">msg</em>, <em class="sig-param">raise_exception: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/contrib/validators/deprecated_validator.html#DeprecatedValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.contrib.validators.DeprecatedValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits a warning or raises
<cite>ValidationError &lt;concrete_settings.exceptions.ValidationError&gt;</cite>
indicating that setting is deprecated.</p>
<p>This is a helper validator added to a Setting attribute validators
by <a class="reference internal" href="#concrete_settings.contrib.behaviors.deprecated" title="concrete_settings.contrib.behaviors.deprecated"><code class="xref py py-class docutils literal notranslate"><span class="pre">&#64;deprecated</span></code></a>
behavior.</p>
</dd></dl>

</div>
</div>
<div class="section" id="behaviors">
<h2>Behaviors<a class="headerlink" href="#behaviors" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="concrete_settings.Behavior">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.</code><code class="sig-name descname">Behavior</code><a class="reference internal" href="_modules/concrete_settings/core.html#Behavior"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Behavior" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for Setting attributes behaviors.</p>
<dl class="method">
<dt id="concrete_settings.Behavior.inject">
<code class="sig-name descname">inject</code><span class="sig-paren">(</span><em class="sig-param">setting: concrete_settings.core.Setting</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Behavior.inject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Behavior.inject" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject self to Setting attribute behaviors.</p>
<p>If your custom behavior adds a decorator to the Setting,
override this method as follows:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting</span><span class="p">:</span> <span class="s1">&#39;Setting&#39;</span><span class="p">):</span>
   <span class="n">setting</span><span class="o">.</span><span class="n">validators</span> <span class="o">=</span> <span class="p">(</span>
          <span class="n">MyValidator</span><span class="p">()</span>
   <span class="p">)</span> <span class="o">+</span> <span class="n">setting</span><span class="o">.</span><span class="n">validators</span>

   <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">setting</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>setting</strong> – Setting to which the behavior is attached.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Passed setting object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Behavior.get_setting_value">
<code class="sig-name descname">get_setting_value</code><span class="sig-paren">(</span><em class="sig-param">setting</em>, <em class="sig-param">owner</em>, <em class="sig-param">get_value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Behavior.get_setting_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Behavior.get_setting_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when setting.__get__() is invoked.</p>
</dd></dl>

<dl class="method">
<dt id="concrete_settings.Behavior.set_setting_value">
<code class="sig-name descname">set_setting_value</code><span class="sig-paren">(</span><em class="sig-param">setting</em>, <em class="sig-param">owner</em>, <em class="sig-param">val</em>, <em class="sig-param">set_value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Behavior.set_setting_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Behavior.set_setting_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when setting.__set__() is invoked.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="concrete_settings.Behaviors">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.</code><code class="sig-name descname">Behaviors</code><span class="sig-paren">(</span><em class="sig-param">iterable=()</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/core.html#Behaviors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.Behaviors" title="Permalink to this definition">¶</a></dt>
<dd><p>A container for setting behaviors</p>
</dd></dl>

<div class="section" id="deprecated">
<h3>deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.contrib.behaviors.deprecated">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.contrib.behaviors.</code><code class="sig-name descname">deprecated</code><span class="sig-paren">(</span><em class="sig-param">deprecation_message: str = 'Setting `{name}` in class `{owner}` is deprecated.'</em>, <em class="sig-param">*</em>, <em class="sig-param">warn_on_validation=True</em>, <em class="sig-param">error_on_validation=False</em>, <em class="sig-param">warn_on_get=False</em>, <em class="sig-param">warn_on_set=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/contrib/behaviors/deprecated_behavior.html#deprecated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.contrib.behaviors.deprecated" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds <a class="reference internal" href="#concrete_settings.contrib.validators.DeprecatedValidator" title="concrete_settings.contrib.validators.DeprecatedValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeprecatedValidator</span></code></a>  # noqa: E501 # line too long
to setting validators.</p>
</dd></dl>

</div>
<div class="section" id="required">
<h3>required<a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.contrib.behaviors.required">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.contrib.behaviors.</code><code class="sig-name descname">required</code><span class="sig-paren">(</span><em class="sig-param">message: str = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/contrib/behaviors/required_behavior.html#required"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.contrib.behaviors.required" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="module-concrete_settings.sources">
<span id="sources"></span><span id="api-sources"></span><h2>Sources<a class="headerlink" href="#module-concrete_settings.sources" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="concrete_settings.sources.Source">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.sources.</code><code class="sig-name descname">Source</code><a class="reference internal" href="_modules/concrete_settings/sources.html#Source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.sources.Source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="section" id="built-in-sources">
<h3>Built-in Sources<a class="headerlink" href="#built-in-sources" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.contrib.sources.YamlSource">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.contrib.sources.</code><code class="sig-name descname">YamlSource</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/contrib/sources/yaml_source.html#YamlSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.contrib.sources.YamlSource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="concrete_settings.contrib.sources.JsonSource">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.contrib.sources.</code><code class="sig-name descname">JsonSource</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/contrib/sources/json_source.html#JsonSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.contrib.sources.JsonSource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="concrete_settings.contrib.sources.EnvVarSource">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.contrib.sources.</code><code class="sig-name descname">EnvVarSource</code><a class="reference internal" href="_modules/concrete_settings/contrib/sources/envvar_source.html#EnvVarSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.contrib.sources.EnvVarSource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-concrete_settings.sources.strategies">
<span id="update-strategies"></span><h3>Update strategies<a class="headerlink" href="#module-concrete_settings.sources.strategies" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="concrete_settings.sources.strategies.Strategy">
<em class="property">class </em><code class="sig-prename descclassname">concrete_settings.sources.strategies.</code><code class="sig-name descname">Strategy</code><span class="sig-paren">(</span><em class="sig-param">Protocol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/concrete_settings/sources/strategies.html#Strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#concrete_settings.sources.strategies.Strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>A strategy decides how a setting value will be <a class="reference internal" href="#concrete_settings.Settings.update" title="concrete_settings.Settings.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">updated</span></code></a>.</p>
<dl class="field-list">
<dt class="field-odd">Method</dt>
<dd class="field-odd"><p>__call__(current_value, new_value)</p>
<p>The signature of Strategy callables</p>
<dl class="field-list simple">
<dt class="field-odd">param current_value</dt>
<dd class="field-odd"><p>is the current value of a setting</p>
</dd>
<dt class="field-even">param new_value</dt>
<dd class="field-even"><p>is the new_value from a source.</p>
</dd>
</dl>
</dd>
</dl>
<p>Usually a strategy is a simple and small function.
For example if a setting is a tuple, the following strategy
would append values, instead of overwriting the tuple:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the required strategy</span>
<span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="n">new_val</span><span class="p">,</span> <span class="n">old_val</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">new_val</span> <span class="o">+</span> <span class="n">old_val</span>

<span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
    <span class="n">ADMIN_EMAILS</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;cto@example.com&#39;</span><span class="p">,</span> <span class="p">)</span>

<span class="n">app_settings</span> <span class="o">=</span> <span class="n">AppSettings</span><span class="p">()</span>
<span class="n">app_settings</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">source</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;ADMIN_EMAILS&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;alex@example.com&#39;</span><span class="p">,</span> <span class="p">)</span>
    <span class="p">},</span>
    <span class="n">strategies</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;ADMIN_EMAILS&#39;</span><span class="p">:</span> <span class="n">append</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">app_settings</span><span class="o">.</span><span class="n">ADMIN_EMAILS</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;cto@example.com&#39;, &#39;alex@example.com&#39;)
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#module-concrete_settings.types">Types</a></li>
<li><a class="reference internal" href="#module-concrete_settings.validators">Validators</a><ul>
<li><a class="reference internal" href="#valuetypevalidator">ValueTypeValidator</a></li>
<li><a class="reference internal" href="#requiredvalidator">RequiredValidator</a></li>
<li><a class="reference internal" href="#deprecatedvalidator">DeprecatedValidator</a></li>
</ul>
</li>
<li><a class="reference internal" href="#behaviors">Behaviors</a><ul>
<li><a class="reference internal" href="#deprecated">deprecated</a></li>
<li><a class="reference internal" href="#required">required</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-concrete_settings.sources">Sources</a><ul>
<li><a class="reference internal" href="#built-in-sources">Built-in Sources</a></li>
<li><a class="reference internal" href="#module-concrete_settings.sources.strategies">Update strategies</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="batteries.html"
                        title="previous chapter">Batteries</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="batteries.html" title="Batteries"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Concrete Settings  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Zaur Nasibov.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>